<div class="navbar">
  <div class="d-flex">
    <div class="dropdown mr-1">
      <button type="button" class="organisation-options-dropdown-button btn btn-primary btn-block dropdown-toggle"
        id="organisationOptions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{ userDetails.current_organisation.name }}
      </button>
      <div class="dropdown-menu mt-3" aria-labelledby="organisationOptions">
        <a class="dropdown-item pl-3 pr-5 d-flex align-items-center">
          <img class="current-organisation-logo img-thumbnail mr-1"
            [src]="getCurrentOrganisationLogo(userDetails.current_organisation)"
            [alt]="getCurrentOrganisationLogo(userDetails.current_organisation)">
          <div class="current-organisation-name">{{ userDetails.current_organisation.name }}</div>
        </a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" *ngFor="let team of userDetails.teams | sortBy:'name'">

          <div class="with-icon">
            <i class="fa fa-users text-primary"></i>
            <span class="d-inline-block">
              {{ team.name }}
            </span>
          </div>
        </a>
        <a class="dropdown-item">
          <div class="with-icon">
            <i class="fa fa-plus-square text-primary"></i>
            <span class="d-inline-block">
              Add a new team
            </span>
          </div>
        </a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" [routerLink]="['/organisation-settings']">Organisation Settings</a>
        <a class="dropdown-item">Settings</a>
      </div>
    </div>
  </div>

  <div class="main-pages-navigation">
    <ul class="nav">
      <li class="nav-items" routerLinkActive="active">
        <a [routerLink]="['/data']" class="nav-link text-light">Data</a>
      </li>
      <li class="nav-items" routerLinkActive="active">
        <a [routerLink]="['/flows']" class="nav-link text-light">Flows</a>
      </li>
      <li class="nav-items" routerLinkActive="active">
        <a [routerLink]="['/forms']" class="nav-link text-light">Forms</a>
      </li>
      <li class="nav-items" routerLinkActive="active">
        <a [routerLink]="['/templates']" class="nav-link text-light">Templates</a>
      </li>
    </ul>
  </div>

  <div class="dropdown ml-auto">
    <button type="button" class="user-options-dropdown-button btn btn-secondary dropdown-toggle"
      id="userOptions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ userDetails.initials }}
    </button>
    <div class="dropdown-menu mt-3 dropdown-menu-right" aria-labelledby="userOptions">
      <a class="dropdown-item font-weight-bold">{{ userDetails.name }}</a>
      <a class="dropdown-item text-black-50" [routerLink]="['/profile']">
        Edit profile
      </a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" [class.disabled]="organisation.id === userDetails.current_organisation.id"
        *ngFor="let organisation of userDetails.organisations | sortBy:'name'"
        (click)="swithOrganisation(organisation)">
        <div class="with-icon">
          <i class="fas text-primary"
            [class.fa-check-square]="organisation.id === userDetails.current_organisation.id"
            [class.fa-square]="organisation.id !== userDetails.current_organisation.id"
          ></i>
          <div class="d-inline-block">{{ organisation.name }}</div>
        </div>
      </a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" (click)="logout()">
        <i class="fas fa-sign-out"></i>
        Logout
      </a>
    </div>
  </div>
</div>
